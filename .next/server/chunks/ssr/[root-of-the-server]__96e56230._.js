module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},69334,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(a){return new Date(a).toLocaleString(void 0,{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!0),n=(0,c.useMemo)(()=>{let a=l?"?upcoming=1":"";return`/api/admin/bookings${a}`},[l]);async function o(){k(""),i(!0);try{let a=await fetch(n,{cache:"no-store"}),b=await a.json().catch(()=>({}));if(!a.ok)throw Error(b?.error||`Failed (${a.status})`);g(Array.isArray(b?.bookings)?b.bookings:[])}catch(a){k(a?.message||"Failed to load."),g([])}finally{i(!1)}}function p(a){navigator.clipboard?.writeText(a).catch(()=>{})}return(0,c.useEffect)(()=>{o()},[n]),(0,b.jsx)("div",{className:"section",children:(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("div",{className:"badge",children:"Admin"}),(0,b.jsx)("h1",{className:"h1",style:{fontSize:44,marginTop:12},children:"Bookings & client contacts"}),(0,b.jsx)("p",{className:"p",children:"Use this list to message clients on WhatsApp. You can also export CSV."}),(0,b.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginTop:14},children:[(0,b.jsx)("button",{className:"btn btnGhost",onClick:()=>a.push("/admin/slots"),children:"Slots"}),(0,b.jsx)("button",{className:"btn btnGhost",onClick:()=>a.push("/"),children:"Home"}),(0,b.jsx)("button",{className:"btn btnGhost",onClick:o,disabled:h,children:h?"Refreshing...":"Refresh"}),(0,b.jsx)("button",{className:"btn btnGhost",onClick:function(){let a=new Blob([[["bookingId","start","end","deviceTimezone","leadEmail","leadPhone","leadCountry","leadTimezone","createdAt"],...f.map(a=>[a.id,a.slot.startsAt,a.slot.endsAt,a.timezone||"",a.lead.email,a.lead.phone,a.lead.country,a.lead.timezone,a.createdAt])].map(a=>a.map(a=>`"${String(a).replaceAll('"','""')}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download="bookings.csv",c.click(),URL.revokeObjectURL(b)},disabled:0===f.length,children:"Export CSV"}),(0,b.jsxs)("label",{className:"p",style:{display:"flex",gap:10,alignItems:"center"},children:[(0,b.jsx)("input",{type:"checkbox",checked:l,onChange:a=>m(a.target.checked)}),"Show only upcoming"]})]}),j&&(0,b.jsxs)("div",{className:"card",style:{borderColor:"rgba(255,120,120,0.6)",marginTop:14},children:[(0,b.jsx)("b",{style:{color:"#ffd4d4"},children:"Fix this"}),(0,b.jsx)("div",{className:"p",style:{marginTop:6},children:j}),(0,b.jsx)("div",{className:"p",style:{marginTop:8,opacity:.9},children:"If you see “Unauthorized”, it means your admin email isn’t allowed. Add it to ADMIN_EMAILS / ADMIN_EMAIL in your env vars."})]}),(0,b.jsx)("div",{className:"card",style:{marginTop:14},children:h?(0,b.jsx)("div",{className:"p",children:"Loading..."}):0===f.length?(0,b.jsx)("div",{className:"p",children:"No bookings found."}):(0,b.jsx)("div",{style:{display:"grid",gap:12},children:f.map(a=>{let c;return(0,b.jsx)("div",{className:"card",style:{background:"rgba(10,16,32,0.35)"},children:(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{fontWeight:800,fontSize:18},children:[e(a.slot.startsAt)," → ",e(a.slot.endsAt)]}),(0,b.jsxs)("div",{className:"p",style:{marginTop:6,opacity:.9},children:[(0,b.jsx)("b",{children:"Email:"})," ",a.lead.email," ",(0,b.jsx)("button",{className:"btn btnGhost",style:{padding:"6px 10px",marginLeft:8},onClick:()=>p(a.lead.email),children:"Copy"})]}),(0,b.jsxs)("div",{className:"p",style:{marginTop:6,opacity:.9},children:[(0,b.jsx)("b",{children:"WhatsApp:"})," ",a.lead.phone," ",(0,b.jsx)("button",{className:"btn btnGhost",style:{padding:"6px 10px",marginLeft:8},onClick:()=>p(a.lead.phone),children:"Copy"})," ",(0,b.jsx)("a",{className:"btn btnPrimary",style:{padding:"6px 10px",marginLeft:8},href:(c=a.lead.phone.replace(/\D/g,""),`https://wa.me/${c}`),target:"_blank",rel:"noreferrer",children:"Open chat"})]}),(0,b.jsxs)("div",{className:"p",style:{marginTop:8,opacity:.8},children:[(0,b.jsx)("b",{children:"Device TZ:"})," ",a.timezone||"N/A"," • ",(0,b.jsx)("b",{children:"Lead TZ:"})," ",a.lead.timezone," •"," ",(0,b.jsx)("b",{children:"Country:"})," ",a.lead.country]}),(0,b.jsxs)("div",{className:"p",style:{marginTop:6,opacity:.75},children:[(0,b.jsx)("b",{children:"Booking ID:"})," ",a.id," ",(0,b.jsx)("button",{className:"btn btnGhost",style:{padding:"6px 10px",marginLeft:8},onClick:()=>p(a.id),children:"Copy"})]})]}),(0,b.jsxs)("div",{className:"p",style:{opacity:.7,whiteSpace:"nowrap"},children:["Created: ",e(a.createdAt)]})]})},a.id)})})})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__96e56230._.js.map