module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},28974,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(a){return new Date(a).toLocaleString(void 0,{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),t=(0,c.useMemo)(()=>new Date,[]);async function u(){m(""),o(""),i(!0);try{let b=await fetch("/api/admin/slots",{cache:"no-store"}),c=await b.json().catch(()=>({}));if(!b.ok)throw 401===b.status&&a.push("/admin/login"),Error(c?.error||"Failed to load slots.");g(Array.isArray(c?.slots)?c.slots:[])}catch(a){m(a?.message||"Failed to load slots."),g([])}finally{i(!1)}}async function v(){m(""),o(""),k(!0);try{let a=new Date(p),b=new Date(r),c=await fetch("/api/admin/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startsAt:a.toISOString(),endsAt:b.toISOString()})}),d=await c.json().catch(()=>({}));if(!c.ok)throw Error(d?.error||"Failed to create slot.");o("Slot added."),await u()}catch(a){m(a?.message||"Failed to create slot.")}finally{k(!1)}}async function w(a){m(""),o("");try{let b=await fetch(`/api/admin/slots/${a}`,{method:"DELETE"}),c=await b.json().catch(()=>({}));if(!b.ok)throw Error(c?.error||"Failed to disable slot.");o("Slot disabled."),await u()}catch(a){m(a?.message||"Failed to disable slot.")}}return(0,c.useEffect)(()=>{let a=new Date(t);a.setMinutes(0,0,0),a.setHours(a.getHours()+1);let b=new Date(a.getTime()+18e5),c=a=>{let b=a=>String(a).padStart(2,"0");return`${a.getFullYear()}-${b(a.getMonth()+1)}-${b(a.getDate())}T${b(a.getHours())}:${b(a.getMinutes())}`};q(c(a)),s(c(b)),u()},[]),(0,b.jsx)("div",{className:"section",children:(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("div",{className:"badge",children:"Admin"}),(0,b.jsx)("h1",{className:"h1",style:{fontSize:40,marginTop:12},children:"Manage onboarding slots"}),(0,b.jsx)("p",{className:"p",children:"Add new call slots and disable existing ones."}),(0,b.jsxs)("div",{className:"card",style:{marginTop:14},children:[(0,b.jsx)("h2",{style:{fontSize:18,fontWeight:800},children:"Add a slot"}),(0,b.jsxs)("div",{style:{display:"grid",gap:12,marginTop:12,maxWidth:520},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"p",style:{marginBottom:6},children:"Start (your local time)"}),(0,b.jsx)("input",{type:"datetime-local",className:"input",value:p,onChange:a=>q(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"p",style:{marginBottom:6},children:"End (your local time)"}),(0,b.jsx)("input",{type:"datetime-local",className:"input",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[(0,b.jsx)("button",{className:"btn btnPrimary",onClick:v,disabled:j,children:j?"Adding...":"Add slot"}),(0,b.jsx)("button",{className:"btn btnGhost",onClick:u,disabled:h,children:h?"Refreshing...":"Refresh"})]})]})]}),l&&(0,b.jsxs)("div",{className:"card",style:{borderColor:"rgba(255,120,120,0.6)",marginTop:14},children:[(0,b.jsx)("b",{style:{color:"#ffd4d4"},children:"Fix this"}),(0,b.jsx)("div",{className:"p",style:{marginTop:6},children:l})]}),n&&(0,b.jsxs)("div",{className:"card",style:{borderColor:"rgba(120,255,160,0.35)",marginTop:14},children:[(0,b.jsx)("b",{style:{color:"#d6ffe3"},children:"Done"}),(0,b.jsx)("div",{className:"p",style:{marginTop:6},children:n})]}),(0,b.jsxs)("div",{className:"card",style:{marginTop:14},children:[(0,b.jsx)("h2",{style:{fontSize:18,fontWeight:800},children:"Slots"}),h?(0,b.jsx)("div",{className:"p",style:{marginTop:10},children:"Loading..."}):0===f.length?(0,b.jsx)("div",{className:"p",style:{marginTop:10},children:"No slots found."}):(0,b.jsx)("div",{style:{display:"grid",gap:10,marginTop:12},children:f.map(a=>(0,b.jsxs)("div",{className:"card",style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",opacity:a.isActive?1:.55},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{fontWeight:800},children:[e(a.startsAt)," → ",e(a.endsAt)]}),(0,b.jsxs)("div",{className:"p",style:{marginTop:4},children:["Status: ",a.isActive?"Active":"Disabled"," • ID: ",a.id]})]}),(0,b.jsx)("div",{style:{display:"flex",gap:10},children:a.isActive?(0,b.jsx)("button",{className:"btn btnGhost",onClick:()=>w(a.id),children:"Disable"}):(0,b.jsx)("button",{className:"btn btnGhost",disabled:!0,children:"Disabled"})})]},a.id))})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:12,marginTop:16,flexWrap:"wrap"},children:[(0,b.jsx)("button",{className:"btn btnGhost",onClick:()=>a.push("/"),children:"Home"}),(0,b.jsx)("button",{className:"btn btnGhost",onClick:()=>a.push("/onboarding/terms"),children:"Onboarding"})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__37e3fcbe._.js.map