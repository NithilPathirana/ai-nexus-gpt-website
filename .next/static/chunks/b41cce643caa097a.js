(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},62423,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566);function i(e){return new Date(e).toLocaleString(void 0,{weekday:"short",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function l(){let e=(0,a.useRouter)(),[l,n]=(0,s.useState)([]),[o,r]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[u,y]=(0,s.useState)(""),[x,j]=(0,s.useState)(""),b=(0,s.useMemo)(()=>new Date,[]);async function f(){m(""),p(""),r(!0);try{let t=await fetch("/api/admin/slots",{cache:"no-store"}),s=await t.json().catch(()=>({}));if(!t.ok)throw 401===t.status&&e.push("/admin/login"),Error(s?.error||"Failed to load slots.");n(Array.isArray(s?.slots)?s.slots:[])}catch(e){m(e?.message||"Failed to load slots."),n([])}finally{r(!1)}}async function v(){m(""),p(""),c(!0);try{let e=new Date(u),t=new Date(x),s=await fetch("/api/admin/slots",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startsAt:e.toISOString(),endsAt:t.toISOString()})}),a=await s.json().catch(()=>({}));if(!s.ok)throw Error(a?.error||"Failed to create slot.");p("Slot added."),await f()}catch(e){m(e?.message||"Failed to create slot.")}finally{c(!1)}}async function N(e){m(""),p("");try{let t=await fetch(`/api/admin/slots/${e}`,{method:"DELETE"}),s=await t.json().catch(()=>({}));if(!t.ok)throw Error(s?.error||"Failed to disable slot.");p("Slot disabled."),await f()}catch(e){m(e?.message||"Failed to disable slot.")}}return(0,s.useEffect)(()=>{let e=new Date(b);e.setMinutes(0,0,0),e.setHours(e.getHours()+1);let t=new Date(e.getTime()+18e5),s=e=>{let t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`};y(s(e)),j(s(t)),f()},[]),(0,t.jsx)("div",{className:"section",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"badge",children:"Admin"}),(0,t.jsx)("h1",{className:"h1",style:{fontSize:40,marginTop:12},children:"Manage onboarding slots"}),(0,t.jsx)("p",{className:"p",children:"Add new call slots and disable existing ones."}),(0,t.jsxs)("div",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{style:{fontSize:18,fontWeight:800},children:"Add a slot"}),(0,t.jsxs)("div",{style:{display:"grid",gap:12,marginTop:12,maxWidth:520},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"p",style:{marginBottom:6},children:"Start (your local time)"}),(0,t.jsx)("input",{type:"datetime-local",className:"input",value:u,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"p",style:{marginBottom:6},children:"End (your local time)"}),(0,t.jsx)("input",{type:"datetime-local",className:"input",value:x,onChange:e=>j(e.target.value)})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn btnPrimary",onClick:v,disabled:d,children:d?"Adding...":"Add slot"}),(0,t.jsx)("button",{className:"btn btnGhost",onClick:f,disabled:o,children:o?"Refreshing...":"Refresh"})]})]})]}),h&&(0,t.jsxs)("div",{className:"card",style:{borderColor:"rgba(255,120,120,0.6)",marginTop:14},children:[(0,t.jsx)("b",{style:{color:"#ffd4d4"},children:"Fix this"}),(0,t.jsx)("div",{className:"p",style:{marginTop:6},children:h})]}),g&&(0,t.jsxs)("div",{className:"card",style:{borderColor:"rgba(120,255,160,0.35)",marginTop:14},children:[(0,t.jsx)("b",{style:{color:"#d6ffe3"},children:"Done"}),(0,t.jsx)("div",{className:"p",style:{marginTop:6},children:g})]}),(0,t.jsxs)("div",{className:"card",style:{marginTop:14},children:[(0,t.jsx)("h2",{style:{fontSize:18,fontWeight:800},children:"Slots"}),o?(0,t.jsx)("div",{className:"p",style:{marginTop:10},children:"Loading..."}):0===l.length?(0,t.jsx)("div",{className:"p",style:{marginTop:10},children:"No slots found."}):(0,t.jsx)("div",{style:{display:"grid",gap:10,marginTop:12},children:l.map(e=>(0,t.jsxs)("div",{className:"card",style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"center",opacity:e.isActive?1:.55},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{fontWeight:800},children:[i(e.startsAt)," → ",i(e.endsAt)]}),(0,t.jsxs)("div",{className:"p",style:{marginTop:4},children:["Status: ",e.isActive?"Active":"Disabled"," • ID: ",e.id]})]}),(0,t.jsx)("div",{style:{display:"flex",gap:10},children:e.isActive?(0,t.jsx)("button",{className:"btn btnGhost",onClick:()=>N(e.id),children:"Disable"}):(0,t.jsx)("button",{className:"btn btnGhost",disabled:!0,children:"Disabled"})})]},e.id))})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:12,marginTop:16,flexWrap:"wrap"},children:[(0,t.jsx)("button",{className:"btn btnGhost",onClick:()=>e.push("/"),children:"Home"}),(0,t.jsx)("button",{className:"btn btnGhost",onClick:()=>e.push("/onboarding/terms"),children:"Onboarding"})]})]})})}e.s(["default",()=>l])}]);